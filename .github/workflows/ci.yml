name: ci
on: [ push, pull_request, workflow_dispatch ]
jobs:
  old:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/setup-go@v2
        with:
          go-version: '1.15.2'
      - name: go version
        run: |
          set -x
          go version
          go env
          which go
          echo $PATH
          which go
  set-go:
    strategy:
      fail-fast: false
      matrix:
        os: [ ubuntu-20.04, macos-11, windows-2019 ]
    runs-on: ${{ matrix.os }}
    defaults:
      run:
        shell: bash
    steps:
      - run: env
      - uses: actions/checkout@v2
      - name: setup go
        shell: bash
        id: setup-go
        env:
          INSTALL_GO_VERSION: 1.15.2
        run: src/install-go
      - name: echo outputs
        run: |
          echo 'go_install_dir=${{steps.setup-go.outputs.go_install_dir}}'
          echo 'GOCACHE=${{steps.setup-go.outputs.GOCACHE}}'
          echo 'GOMODCACHE=${{steps.setup-go.outputs.GOMODCACHE}}'
          echo 'GOPATH=${{steps.setup-go.outputs.GOPATH}}'
          echo 'GOROOT=${{steps.setup-go.outputs.GOROOT}}'
          echo 'GOTOOLDIR=${{steps.setup-go.outputs.GOTOOLDIR}}'
          echo 'GOMOD=${{steps.setup-go.outputs.GOMOD}}'

#          go$goversion download
#  new:
#    runs-on: ubuntu-20.04
#    steps:
#      - name: setup go
#        run: |
#          echo "PATH=$GOROOT_1_15_X64/bin:$PATH" >> $GITHUB_ENV
#          echo "GOROOT=$GOROOT_1_15_X64" >> $GITHUB_ENV
#      - name: go verion
#        run: |
#          go version
#          go env
